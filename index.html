<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Styling Adventures Admin</title>

    <!-- Zero-flash theme bootstrap -->
    <script>
      (function () {
        try {
          var mode = localStorage.getItem('theme') || 'auto';
          var prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
          var effective = mode === 'auto' ? (prefersDark ? 'dark' : 'light') : mode;

          var root = document.documentElement;
          root.setAttribute('data-theme', effective);
          root.classList.toggle('light', effective === 'light');
          root.classList.toggle('dark',  effective === 'dark');

          document.addEventListener('DOMContentLoaded', function () {
            document.body.classList.toggle('light', effective === 'light');
            document.body.classList.toggle('dark',  effective === 'dark');
          });
        } catch (_) {}
      })();
    </script>

    <link rel="icon" href="/assets/lala-avatar.png" type="image/png" />

    <!-- Boot-time only styles; keep minimal -->
    <style>
      html, body { background: #fbf7ff; }
      body { margin: 0; }
    </style>
  </head>

  <body class="app-body">
    <div id="root"></div>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <script type="module" src="/src/main.jsx"></script>

    <!-- Optional: toggle a debug class with the "g" key -->
    <script>
      (function () {
        const KEY = "__debug";

        // apply on load
        try {
          if (localStorage.getItem(KEY) === "1") {
            document.documentElement.classList.add("debug");
          }
        } catch (_) {}

        document.addEventListener(
          "keydown",
          (e) => {
            // ignore while typing in inputs/textareas or during IME composition
            const tag = (e.target && e.target.tagName || "").toLowerCase();
            if (tag === "input" || tag === "textarea" || e.isComposing) return;

            // guard against undefined/non-string keys
            const k = typeof e.key === "string" ? e.key.toLowerCase() : "";
            if (k !== "g") return;

            const root = document.documentElement;
            root.classList.toggle("debug");

            try {
              localStorage.setItem(KEY, root.classList.contains("debug") ? "1" : "0");
            } catch (_) {}
          },
          { passive: true }
        );
      })();
    </script>
  </body>
</html>
